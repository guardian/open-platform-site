!function(l){function n(t){return Array.prototype.slice.call(t)}function a(t,e,r){return l().bind.apply(l(l.address),Array.prototype.slice.call(arguments)),l.address}function r(){return U.pushState&&b.state!==p}function F(){return("/"+j.pathname.replace(new RegExp(b.state),"")+j.search+(u()?"#"+u():"")).replace(H,"/")}function C(){try{return top.document!==p&&top.document.title!==p&&top.jQuery!==p&&top.jQuery.address!==p&&!1!==top.jQuery.address.frames()?top:window}catch(t){return window}}function i(t){return t=t.toString(),(b.strict&&"/"!=t.substr(0,1)?"/":"")+t}function e(t,e){return parseInt(t.css(e),10)}function s(){var t;$||(t=d(),decodeURI(L)!=decodeURI(t)&&(E&&x<7?j.reload():(E&&!A&&b.history&&R(f,50),L=t,h(w))))}function M(){if(q&&-1!=J){for(var t,e=q.substr(J+1).split("&"),r=0;r<e.length;r++)t=e[r].split("="),/^(autoUpdate|history|strict|wrap)$/.test(t[0])&&(b[t[0]]=isNaN(t[1])?/^(true|yes)$/i.test(t[1]):0!==parseInt(t[1],10)),/^(state|tracker)$/.test(t[0])&&(b[t[0]]=t[1]);q=g}L=d()}function W(){var t;V||(V=y,M(),l('a[rel*="address:"]').address(),b.wrap&&(t=l("body"),l("body > *").wrapAll('<div style="padding:'+(e(t,"marginTop")+e(t,"paddingTop"))+"px "+(e(t,"marginRight")+e(t,"paddingRight"))+"px "+(e(t,"marginBottom")+e(t,"paddingBottom"))+"px "+(e(t,"marginLeft")+e(t,"paddingLeft"))+'px;" />').parent().wrap('<div id="'+v+'" style="height:100%;overflow:auto;position:relative;'+(k&&!window.statusbar.visible?"resize:both;":"")+'" />'),l("html, body").css({height:"100%",margin:0,padding:0,overflow:"hidden"}),k&&l('<style type="text/css" />').appendTo("head").text("#"+v+"::-webkit-resizer { background-color: #fff; }")),E&&!A&&(t=I.getElementsByTagName("frameset")[0],(o=I.createElement((t?"":"i")+"frame")).src=B()+":"+w,t?(t.insertAdjacentElement("beforeEnd",o),t[t.cols?"cols":"rows"]+=",0",o.noResize=y,o.frameBorder=o.frameSpacing=0):(o.style.display="none",o.style.width=o.style.height=0,o.tabIndex=-1,I.body.insertAdjacentElement("afterBegin",o)),R(function(){l(o).bind("load",function(){var t=o.contentWindow;(L=t[v]!==p?t[v]:"")!=d()&&(h(w),j.hash=L)}),o.contentWindow[v]===p&&f()},50)),R(function(){c("init"),h(w)},1),r()||(E&&7<x||!E&&A?S.addEventListener?S.addEventListener(m,s,w):S.attachEvent&&S.attachEvent("on"+m,s):G(s,50)),"state"in window.history&&l(window).trigger("popstate"))}var p,o,_,z,c,u,d,B,h,P,f,g,v,m,Q,D,K,y,w,b,t,x,k,E,S,I,U,j,G,R,H,T,A,q,J,N,$,V,X,O,L;l.address=(c=function(t){t=l.extend(l.Event(t),function(){for(var t={},e=l.address.parameterNames(),r=0,n=e.length;r<n;r++)t[e[r]]=l.address.parameter(e[r]);return{value:l.address.value(),path:l.address.path(),pathNames:l.address.pathNames(),parameterNames:e,parameters:t,queryString:l.address.queryString()}}.call(l.address));return l(l.address).trigger(t),t},u=function(){var t=j.href.indexOf("#");return-1!=t?j.href.substr(t+1):""},d=function(){return(r()?F:u)()},B=function(){return"javascript"},h=function(t){return R(P,10),c(Q).isDefaultPrevented()||c(t?D:K).isDefaultPrevented()},P=function(){var t,e;"null"!==b.tracker&&b.tracker!==g&&(t=l.isFunction(b.tracker)?b.tracker:S[b.tracker],e=(j.pathname+j.search+(l.address&&!r()?l.address.value():"")).replace(/\/\//,"/").replace(/^\/$/,""),l.isFunction(t)?t(e):l.isFunction(S.urchinTracker)?S.urchinTracker(e):S.pageTracker!==p&&l.isFunction(S.pageTracker._trackPageview)?S.pageTracker._trackPageview(e):S._gaq!==p&&l.isFunction(S._gaq.push)&&S._gaq.push(["_trackPageview",decodeURI(e)]))},f=function(){var t=B()+":"+w+";document.open();document.writeln('<html><head><title>"+I.title.replace(/\'/g,"\\'")+"</title><script>var "+v+' = "'+encodeURIComponent(d()).replace(/\'/g,"\\'")+(I.domain!=j.hostname?'";document.domain="'+I.domain:"")+"\";<\/script></head></html>');document.close();";x<7?o.src=t:o.contentWindow.location.replace(t)},v="jQueryAddress",m="hashchange",Q="change",D="internalChange",b={autoUpdate:y=!(g=null),history:y,strict:y,frames:y,wrap:w=!(K="externalChange")},T={},(t=function(t){t=t.toLowerCase();t=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:t[1]||"",version:t[2]||"0"}}(navigator.userAgent)).browser&&(T[t.browser]=!0,T.version=t.version),T.chrome?T.webkit=!0:T.webkit&&(T.safari=!0),t=T,x=parseFloat(t.version),k=t.webkit||t.safari,E=!l.support.opacity,S=C(),I=S.document,U=S.history,j=S.location,G=setInterval,R=setTimeout,H=/\/{2,9}/g,T=navigator.userAgent,A="on"+m in S,q=l("script:last").attr("src"),J=q?q.indexOf("?"):-1,N=I.title,X=y,O=V=$=w,L=d(),E&&(x=parseFloat(T.substr(T.indexOf("MSIE")+4)),I.documentMode&&I.documentMode!=x&&(x=8!=I.documentMode?7:8),_=I.onpropertychange,I.onpropertychange=function(){_&&_.call(I),I.title!=N&&-1!=I.title.indexOf("#"+d())&&(I.title=N)}),U.navigationMode&&(U.navigationMode="compatible"),"complete"==document.readyState?z=setInterval(function(){l.address&&(W(),clearInterval(z))},50):(M(),l(W)),l(window).bind("popstate",function(){decodeURI(L)!=decodeURI(d())&&(L=d(),h(w))}).bind("unload",function(){S.removeEventListener?S.removeEventListener(m,s,w):S.detachEvent&&S.detachEvent("on"+m,s)}),{bind:function(t,e,r){return a.apply(this,n(arguments))},unbind:function(t,e){return function(t,e){return l().unbind.apply(l(l.address),Array.prototype.slice.call(arguments)),l.address}.apply(this,n(arguments))},init:function(t,e){return a.apply(this,["init"].concat(n(arguments)))},change:function(t,e){return a.apply(this,[Q].concat(n(arguments)))},internalChange:function(t,e){return a.apply(this,[D].concat(n(arguments)))},externalChange:function(t,e){return a.apply(this,[K].concat(n(arguments)))},baseURL:function(){var t=j.href;return-1!=t.indexOf("#")&&(t=t.substr(0,t.indexOf("#"))),t=/\/$/.test(t)?t.substr(0,t.length-1):t},autoUpdate:function(t){return t!==p?(b.autoUpdate=t,this):b.autoUpdate},history:function(t){return t!==p?(b.history=t,this):b.history},state:function(t){var e;return t!==p?(b.state=t,e=F(),b.state!==p&&(U.pushState?"/#/"==e.substr(0,3)&&j.replace(b.state.replace(/^\/$/,"")+e.substr(2)):"/"!=e&&e.replace(/^\/#/,"")!=u()&&R(function(){j.replace(b.state.replace(/^\/$/,"")+"/#"+e)},1)),this):b.state},frames:function(t){return t!==p?(b.frames=t,S=C(),this):b.frames},strict:function(t){return t!==p?(b.strict=t,this):b.strict},tracker:function(t){return t!==p?(b.tracker=t,this):b.tracker},wrap:function(t){return t!==p?(b.wrap=t,this):b.wrap},update:function(){return O=y,this.value(L),O=w,this},title:function(t){return t!==p?(R(function(){N=I.title=t,X&&o&&o.contentWindow&&o.contentWindow.document&&(o.contentWindow.document.title=t,X=w)},50),this):I.title},value:function(t){if(t===p)return i(L);if(t=i(t),L!=(t="/"==t?"":t)||O){if(L=t,b.autoUpdate||O){if(h(y))return this;r()?U[b.history?"pushState":"replaceState"]({},"",b.state.replace(/\/$/,"")+(""===L?"/":L)):($=y,!k&&L==d()||(b.history?j.hash="#"+L:j.replace("#"+L)),E&&!A&&b.history&&R(f,50),k?R(function(){$=w},1):$=w)}return this}},path:function(t){var e,r;return t!==p?(e=this.queryString(),r=this.hash(),this.value(t+(e?"?"+e:"")+(r?"#"+r:"")),this):i(L).split("#")[0].split("?")[0]},pathNames:function(){var t=this.path(),e=t.replace(H,"/").split("/");return"/"!=t.substr(0,1)&&0!==t.length||e.splice(0,1),"/"==t.substr(t.length-1,1)&&e.splice(e.length-1,1),e},queryString:function(t){var e;return t!==p?(e=this.hash(),this.value(this.path()+(t?"?"+t:"")+(e?"#"+e:"")),this):(t=L.split("?")).slice(1,t.length).join("?").split("#")[0]},parameter:function(t,e,r){var n;if(e!==p){var a=this.parameterNames(),i=[];for(e=e===p||e===g?"":e.toString(),n=0;n<a.length;n++){var s=a[n],o=this.parameter(s);"string"==typeof o&&(o=[o]),s==t&&(o=e===g||""===e?[]:r?o.concat([e]):[e]);for(var c=0;c<o.length;c++)i.push(s+"="+o[c])}return-1==l.inArray(t,a)&&e!==g&&""!==e&&i.push(t+"="+e),this.queryString(i.join("&")),this}if(e=this.queryString()){var u=[];for(i=e.split("&"),n=0;n<i.length;n++){var d=i[n].split("=");d[0]==t&&u.push(d.slice(1).join("="))}if(0!==u.length)return 1!=u.length?u:u[0]}},parameterNames:function(){var t=this.queryString(),e=[];if(t&&-1!=t.indexOf("="))for(var r=t.split("&"),n=0;n<r.length;n++){var a=r[n].split("=")[0];-1==l.inArray(a,e)&&e.push(a)}return e},hash:function(t){return t!==p?(this.value(L.split("#")[0]+(t?"#"+t:"")),this):(t=L.split("#")).slice(1,t.length).join("#")}}),l.fn.address=function(r){return l(this).each(function(t){l(this).data("address")||l(this).on("click",function(t){if(t.shiftKey||t.ctrlKey||t.metaKey||2==t.which)return!0;var e=t.currentTarget;l(e).is("a")&&(t.preventDefault(),t=r?r.call(e):/address:/.test(l(e).attr("rel"))?l(e).attr("rel").split("address:")[1].split(" ")[0]:void 0===l.address.state()||/^\/?$/.test(l.address.state())?l(e).attr("href").replace(/^(#\!?|\.)/,""):l(e).attr("href").replace(new RegExp("^(.*"+l.address.state()+"|\\.)"),""),l.address.value(t))}).on("submit",function(t){var e=t.currentTarget;l(e).is("form")&&(t.preventDefault(),t=l(e).attr("action"),t=r?r.call(e):(-1!=t.indexOf("?")?t.replace(/&$/,""):t+"?")+l(e).serialize(),l.address.value(t))}).data("address",!0)}),this}}(jQuery);